# 用户使用指南

## 快速开始

### 1. 注册账号

1. 打开浏览器，访问系统首页
2. 点击"立即注册"按钮
3. 输入昵称（必填）和 Steam ID（可选）
4. 点击"注册"按钮
5. 注册成功后自动跳转到大厅

**注意事项：**
- 昵称不能重复
- 昵称长度建议 2-16 个字符
- Steam ID 仅用于显示，不影响功能

### 2. 登录系统

1. 在登录页面输入已注册的昵称
2. 点击"登录"按钮
3. 登录成功后跳转到大厅

## 游戏流程

### 一、加入房间

在大厅页面，您可以：

1. **创建/加入房间**
   - 点击"加入/创建房间"按钮
   - 系统会自动为您匹配可用房间
   - 如果没有可用房间，会创建新房间

2. **查看可用房间**
   - 页面下方显示当前所有可用房间
   - 显示房间ID、玩家数量、房间状态
   - 每 5 秒自动刷新房间列表

### 二、准备开始

1. 加入房间后，点击"准备"按钮
2. 等待其他玩家准备
3. 页面显示所有玩家的准备状态
4. 当所有玩家都准备好后，系统自动开始匹配

**要求：**
- 至少需要 2 名玩家
- 所有玩家都必须点击准备

### 三、系统自动匹配

系统使用 ELO 平衡算法进行分队：

1. **算法原理**
   - 根据玩家的 ELO 评分进行分组
   - 使用暴力枚举找到最平衡的分队方案
   - 确保两队平均 ELO 差距最小

2. **分队结果**
   - 将玩家分为 A 队和 B 队
   - 显示每队的平均 ELO
   - 显示两队的 ELO 差距

3. **自动跳转**
   - 匹配完成后自动跳转到 BP 页面

### 四、地图 Ban/Pick

BP 流程采用投票制：

#### BP 顺序
1. **A队 Ban** - A队投票禁用一张地图
2. **B队 Ban** - B队投票禁用一张地图
3. **A队 Pick** - A队投票选择比赛地图

#### 投票机制
- 只有当前轮到的队伍成员可以投票
- 需要队伍半数以上同意才能执行
- 例如：3人队伍需要至少 2 票

#### 操作步骤
1. 查看当前是哪个队伍操作
2. 如果是你的队伍，点击要 Ban/Pick 的地图
3. 等待队友投票
4. 达到所需票数后自动执行
5. 页面实时同步所有玩家的 BP 进度

#### 地图列表
系统支持 7 张 CS2 官方地图：
- Inferno（炼狱小镇）
- Mirage（荒漠迷城）
- Dust2（炙热沙城2）
- Nuke（核子危机）
- Overpass（死城之谜）
- Ancient（远古遗迹）
- Anubis（阿努比斯）

#### 页面说明
- **绿色边框**：已选择的地图
- **灰色背景**：已被 Ban 的地图
- **可点击**：当前可用的地图
- **实时更新**：每 1.5 秒自动同步状态

### 五、比赛录入

BP 完成后进入比赛录入页面：

#### 录入内容

1. **比分**
   - 输入 A 队得分
   - 输入 B 队得分

2. **玩家数据**
   - 每位玩家的击杀数
   - 每位玩家的死亡数
   - 每位玩家的助攻数
   - 系统自动计算 K/D 比

#### 实时同步功能

- **自动保存**：输入数据后 1 秒自动保存
- **实时共享**：所有玩家可以看到最新数据
- **协同录入**：任何玩家都可以编辑数据
- **每 2 秒同步**：自动从服务器获取最新数据

#### 提交结果

1. 确认所有数据正确
2. 点击"提交比赛结果"按钮
3. 系统弹出确认对话框
4. 确认后提交（提交后无法修改）
5. 显示所有玩家的 ELO 变化
6. 3 秒后自动返回大厅

### 六、ELO 计算

系统自动计算 ELO 变化：

#### 计算公式

```
期望胜率 = 1 / (1 + 10^((对方平均ELO - 己方平均ELO) / 400))
ELO变化 = K × (实际得分 - 期望得分)
```

#### K 因子

根据当前 ELO 等级调整变化幅度：
- **ELO < 1200**：K = 40（新手，变化快）
- **1200 ≤ ELO ≤ 1800**：K = 32（正常）
- **ELO > 1800**：K = 24（高手，变化慢）

#### KD 修正

根据个人表现调整 ELO 变化：
- **KD > 1.5**：额外 +20% 加成
- **KD < 0.8**：减少 20%

#### 示例

假设你的 ELO 是 1000，队友平均 1000：
- 对手平均 ELO 1200
- 期望胜率约 24%
- 如果获胜：+28 ELO
- 如果失败：-4 ELO

## 功能详解

### 查看历史战绩

在大厅点击"战绩"按钮：

#### 显示内容
- 总场次、胜场、败场、胜率
- 最近 20 场比赛记录
- 每场比赛的地图、比分、结果
- 个人击杀、死亡、K/D
- ELO 变化（绿色为增加，红色为减少）

#### 战绩标识
- **左侧绿条**：胜利的比赛
- **左侧红条**：失败的比赛
- **无颜色条**：平局

### 查看排行榜

在大厅点击"排行榜"按钮：

#### 排行内容
- 前 50 名玩家
- 显示排名、昵称、ELO
- 总场次、胜场、败场、胜率
- 总体 K/D 比率

#### 特殊显示
- **🥇 第一名**：金色显示
- **🥈 第二名**：银色显示
- **🥉 第三名**：铜色显示
- **你的排名**：蓝色背景高亮

### 退出登录

1. 在大厅页面点击"退出"按钮
2. 确认退出
3. 如果在房间中，会自动离开房间
4. 清除登录信息，返回登录页

## 常见问题

### 1. 无法加入房间

**原因：**
- 所有房间都已满员（10人）
- 网络连接问题

**解决方法：**
- 等待片刻后重试
- 刷新页面
- 检查网络连接

### 2. BP 页面不同步

**原因：**
- 网络延迟
- 浏览器缓存问题

**解决方法：**
- 等待自动同步（1.5秒一次）
- 刷新页面（会保持 BP 进度）
- 检查页面上的"最后更新时间"

### 3. 比赛数据不同步

**原因：**
- 输入过快，还未保存
- 网络问题

**解决方法：**
- 等待 1 秒让系统自动保存
- 查看"最后同步"时间
- 刷新页面查看最新数据

### 4. 提交失败

**原因：**
- 比分未填写
- 玩家数据不完整
- 网络连接中断

**解决方法：**
- 检查是否填写了所有数据
- 确保比分不为 0:0
- 检查每位玩家都有击杀和死亡数据

### 5. ELO 变化异常

**原因：**
- 这是正常现象
- ELO 系统考虑多种因素

**说明：**
- 战胜强队获得更多 ELO
- 输给弱队损失更多 ELO
- 个人 KD 表现会影响变化幅度
- K 因子根据当前 ELO 等级调整

## 最佳实践

### 1. 房间管理
- 进入房间后尽快准备
- 不要长时间占用房间位置
- 如果需要离开，及时点击"离开房间"

### 2. BP 阶段
- 与队友沟通地图选择
- 注意投票进度
- Ban 掉对方擅长的地图
- Pick 己方优势地图

### 3. 比赛录入
- 比赛结束后及时录入数据
- 仔细核对数据，避免错误
- 利用实时同步功能协同录入
- 提交前再次确认所有数据

### 4. 提升 ELO
- 多参加比赛积累经验
- 提高个人 KD 比
- 与水平相近的玩家对战
- 稳定发挥比单场爆发更重要

## 系统特色

### 1. 实时同步
- BP 进度实时同步所有玩家
- 比赛数据实时共享
- 房间状态自动更新

### 2. 公平匹配
- ELO 平衡算法确保公平
- 自动计算最优分队方案
- 考虑所有玩家水平

### 3. 投票机制
- BP 采用民主投票
- 防止单人决定
- 需要队伍半数以上同意

### 4. 协同录入
- 所有玩家可以编辑数据
- 实时保存和同步
- 减少等待时间

## 技巧与建议

### 游戏技巧
1. 熟悉各个地图特点
2. 了解己方和对方擅长的地图
3. BP 阶段与队友沟通
4. 注意对方的 ELO 分布

### 系统使用
1. 保持网络连接稳定
2. 使用现代浏览器（Chrome/Firefox/Edge）
3. 定期查看战绩分析不足
4. 关注排行榜了解水平差距

## 联系支持

如遇到问题或有建议，请：
- 提交 GitHub Issue
- 联系系统管理员
- 查看项目文档

祝您游戏愉快！🎮

